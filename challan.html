
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }


        .topnav {
  overflow: hidden;
  background-color: #333;
  margin-top: 0px;
    margin-left: 8px;
    width: 1715px;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #aa0404;
  color: white;
}


        #mainContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        #dataTableContainer {
            margin-right: 20px;
            margin-top: 57px;
        }

        #billContainer {
            width: 700px;
            overflow-y: auto;
            border: 2px solid #000000;
            padding: 10px;
            box-sizing: border-box;
        }

    
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #000000;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        #addRowBtn {
            margin-top: 10px;
            padding: 8px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #printBtn {
            margin-top: 10px;
            padding: 8px;
            background-color: #008CBA;
            color: white;
            border: none;
            cursor: pointer;
        }
        #billTable {
            width: 100%;
            margin-top: 12px;
        }
        
        #companyname{
            width: 322px;
            padding: 0px;
        }

        .info{
            margin-top: -14px;
        }

        #site{
            font-size: small;
            font-weight: bold;
        }

        #site2{
            border: none;
        }


        #challanNo{
            margin-left: 190px;
            font-size: small;
            font-weight: bold;
        }

        #challanNo2{
            border: none;
            font-weight: bold;
        }

        #address{
            font-size: small;
            font-weight: bold;
        }

        #address2{
            border: none;
            width: 590px;
        }

        #date{
            margin-left: 200px;
            font-size: small;
            font-weight: bold; 
        }

        #date2{
            border: none;
        }

        #contactNo{
            font-size: small;
            font-weight: bold; 
        }

        #contactNo2{
            border: none;
        }

        #poNo{
            margin-left: 176px;
            font-size: small;
            font-weight: bold; 
        }

        #poNo2{
           border: none;
        }

        #gstNo{
            font-size: small;
            font-weight: bold; 
            margin-left: 18px;
        }

        #gstNo2{
            border: none;
            font-weight: bold;
        }

        #poDate{
            margin-left: 170px;
            font-size: small;
            font-weight: bold; 
        }

        #poDate2{
            border: none;
        }

        #stateName{
            font-size: small;
            font-weight: bold;
            margin-left: 12px;
        }

        #stateName2{
          border: none;
        }

        #workNo{
            margin-left: 152px;
            font-size: small;
            font-weight: bold;  
        }

        #workNo2{
          border: none;
        }

        #transport{
            font-size: small;
            font-weight: bold;
            margin-left: 0px;
        }

        #transport2{
            border: none;
        }

        #vehicleNo{
            margin-left: 162px;
            font-size: small;
            font-weight: bold;  
        }

        #vehicleNo2{
          border: none;
        }

        #address34{
            font-size: small;
            font-weight: bold;
        }

        #address23{
           border: none; 
        }

        input{
            padding: 0px;
           
        }

        .info{
            border: 1px solid black;
        }


        /* Print media query */
        @media print {
            body {
                margin: 0;
                padding: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            #mainContainer {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 20px;
            }
            #dataTableContainer {
                margin-right: 20px;
            }
            #billContainer {
                width: 700px;
                border: 1px solid #000000;
                padding: 10px;
                box-sizing: border-box;
            }
            table {
                border-collapse: collapse;
                width: 100%;
            }
            th, td {
                border: 1px solid #000000;
                padding: 0px;
                text-align: center;
                font-size: small;
            }
            th {
                background-color: #f2f2f2;
            }
            #addRowBtn, #printBtn {
                display: none; /* Hide buttons in print view */
            }

            #dataTableContainer{
             display: none;
            }

            .topnav{
                display: none;
            }

        }

    </style>
</head>
<body>
 
    <div class="topnav">
		<a class="active" href="home.html">Home</a>
		<a href="newcal.html">Daily Estimate Bill</a>
		<a href="gst.html">Gst Bill</a>
		<a href="excel.html">Daily Estimate Bill Records</a>
		<a href="inventory.html">Inventory</a>
		<a href="self.html">Self Daily Bill Records</a>
		<a href="search.html">Search the product</a>
    <a href="barcode.html">Generate Barcode</a>
	  </div>









    <div id="mainContainer">
        <div id="dataTableContainer">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>Material</th>
                        <th>Sr. No</th>
                        <th>Description</th>
                        <th>Length</th>
                        <th>Breadth</th>
                        <th>Quantity</th>
                        <th>Square Feet</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <select name="material[]" onchange="calculateSquareFeet(this)">
                                <option value="Granite">Granite</option>
                                <option value="Kadappa">Kadappa</option>
                                <option value="uncut granite">Uncut Granite</option>
                                <option value="Marble">Sanitary</option>
                                <option value="Tiles">Tiles</option>
                            </select>
                        </td>
                        <td><input type="text" name="srNo[]" value="1"></td>
                        <td><input type="text" name="description[]"></td>
                        <td><input type="number" name="length[]" oninput="calculateSquareFeet(this)"></td>
                        <td><input type="number" name="breadth[]" oninput="calculateSquareFeet(this)"></td>
                        <td><input type="number" name="quantity[]" oninput="calculateSquareFeet(this)"></td>
                        <td><input type="text" name="squareFeet[]" readonly></td>
                    </tr>
                </tbody>
            </table>
            <button id="addRowBtn" onclick="addRow()">Add Row</button>
            <button id="printBtn" onclick="printBill()">Print</button>
        </div>
    </div>

      </div>
    <div id="billContainer">
        <h3 style="border: 1px solid black;">DELIVERY CHALLAN ON APPROVAL</h3>
        <h5><b><input type="text" id="companyname" style=" font-weight: bold;"></b></h5>
       
         <!-- Additional Information Section -->
         <div class="info">
            <label for="site" id="site">Site:</label>
            <input type="text" id="site2" name="site">

            <label for="challanNo" id="challanNo">Challan No:</label>
            <input type="text" id="challanNo2" name="challanNo">

             <label for="address" id="address34">Pincode:</label>
             <input type="text" id="address23"> 

           <label for="date" id="date">Date:</label>
           <input type="text" id="date2">

           <label for="contactNo" id="contactNo">Contact No:</label>
           <input type="text" id="contactNo2" name="contactNo">

           <label for="poNo" id="poNo">Po No:</label>
           <input type="text" id="poNo2" name="poNo">

           <label for="gstNo" id="gstNo">GST NO:</label>
           <input type="text" id="gstNo2" name="gstNo">

           <label for="poDate" id="poDate">Po Date:</label>
            <input type="text" id="poDate2" name="poDate">

            <label for="stateName" id="stateName">State Name:</label>
            <input type="text" id="stateName2" name="stateName">

            <label for="workNo" id="workNo">Work No:</label>
            <input type="text" id="workNo2" name="workNo">

            <label for="transport" id="transport">Transport:</label>
            <input type="text" id="transport2" name="transport">

            <label for="vehicleNo" id="vehicleNo">Vehicle No:</label>
            <input type="text" id="vehicleNo2" name="vehicleNo">

            <label for="address" id="address">Address:</label>
           <input type="text" id="address2">
         </div>
            
        
         <table id="billTable">
            <thead>
                <tr>
                    <th>Sr. No</th>
                    <th>Description</th>
                    <th>Length</th>
                    <th>Breadth</th>
                    <th>Quantity</th>
                    <th>Square Feet</th>
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
                <tr>
                    <td colspan="4">Total:</td>
                    <td id="totalQuantity">0</td>
                    <td id="totalSquareFeet">0</td>
                </tr>
            </tfoot>
            
        </table>
    </div>
   
    

<script>
  function addRow() {
        var table = document.getElementById("dataTable");
        var billTable = document.getElementById("billTable").getElementsByTagName('tbody')[0];
        var newRow = billTable.insertRow(billTable.rows.length);
        var cells = [];
        for (var i = 1; i < table.rows[1].cells.length; i++) {
            cells[i - 1] = newRow.insertCell(i - 1);
            cells[i - 1].innerHTML = table.rows[1].cells[i].getElementsByTagName("input")[0].value;
        }

        // Update total quantity and total square feet
        updateTotals();
    }

    function calculateSquareFeet(input) {
            var row = input.parentNode.parentNode;
            var material = row.cells[0].getElementsByTagName("select")[0].value;
            
            // Handle different materials
            switch (material) {
                case "Granite":
                    var length = parseFloat(row.cells[3].getElementsByTagName("input")[0].value) || 0;
                    var breadth = parseFloat(row.cells[4].getElementsByTagName("input")[0].value) || 0;
                    var quantity = parseFloat(row.cells[5].getElementsByTagName("input")[0].value) || 0;
                    length = Math.ceil(length / 3) * 3;
                    breadth = Math.ceil(breadth / 3) * 3;
                    var squareFeet = (length * breadth * quantity) / 144;
                    row.cells[6].getElementsByTagName("input")[0].value = squareFeet.toFixed(2);
                    break;
                case "Kadappa":
                   // Handle Kadappa material calculations
            var lengthKadappa = parseFloat(row.cells[3].getElementsByTagName("input")[0].value) || 0;
            var breadthKadappa = parseFloat(row.cells[4].getElementsByTagName("input")[0].value) || 0;
            var quantityKadappa = parseFloat(row.cells[5].getElementsByTagName("input")[0].value) || 0;
            
            // Ensure length and breadth are multiples of 6 for Kadappa
            const dimensionsKadappa = [lengthKadappa, breadthKadappa];
            const adjustedDimensionsKadappa = dimensionsKadappa.map(dimension => {
                const multiple = 6;
                const nextMultiple = Math.ceil(dimension / multiple) * multiple;
                return nextMultiple === dimension ? nextMultiple + multiple : nextMultiple;
            });
            
            // Calculate square feet for Kadappa by considering quantity
            var squareFeetKadappa = (adjustedDimensionsKadappa.reduce((acc, val) => acc * val, 1)) / 144 * quantityKadappa;
            row.cells[6].getElementsByTagName("input")[0].value = squareFeetKadappa.toFixed(2);
            break;
               
            case "uncut granite":
           // Handle Tiles material calculations
           var lengthTiles = parseFloat(row.cells[3].getElementsByTagName("input")[0].value) || 0;
            var breadthTiles = parseFloat(row.cells[4].getElementsByTagName("input")[0].value) || 0;
            var quantityTiles = parseFloat(row.cells[5].getElementsByTagName("input")[0].value) || 0;

            // Calculate square feet for Tiles by considering length, breadth, and quantity
            var squareFeetTiles = (lengthTiles * breadthTiles * quantityTiles) / 144;
            row.cells[6].getElementsByTagName("input")[0].value = squareFeetTiles.toFixed(2);
                    break;

                case "Tiles":
                     // Handle Tiles material calculations
            var lengthTiles = parseFloat(row.cells[3].getElementsByTagName("input")[0].value) || 0;
            var breadthTiles = parseFloat(row.cells[4].getElementsByTagName("input")[0].value) || 0;
            var quantityTiles = parseFloat(row.cells[5].getElementsByTagName("input")[0].value) || 0;

            // Calculate square feet for Tiles by considering length, breadth, and quantity
            var squareFeetTiles = (lengthTiles * breadthTiles * quantityTiles) / 144;
            row.cells[6].getElementsByTagName("input")[0].value = squareFeetTiles.toFixed(2);
                    break;
                default:
                    break;
            }

         // Update total quantity and total square feet
           updateTotals();
        }

       





    function updateTotals() {
    var billTable = document.getElementById("billTable").getElementsByTagName("tbody")[0];
    var totalQuantity = 0;
    var totalSquareFeet = 0;

    for (var i = 0; i < billTable.rows.length; i++) {
        var quantity = parseFloat(billTable.rows[i].cells[4].innerHTML) || 0;
        var squareFeet = parseFloat(billTable.rows[i].cells[5].innerHTML) || 0;

        totalQuantity += quantity;
        totalSquareFeet += squareFeet;
    }

    document.getElementById("totalQuantity").innerHTML = totalQuantity.toFixed(2);
    document.getElementById("totalSquareFeet").innerHTML = totalSquareFeet.toFixed(2);


}

    function printBill() {
        window.print();
    }


</script>

</body>
</html>