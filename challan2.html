
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }


        .topnav {
  overflow: hidden;
  background-color: #333;
  margin-top: 0px;
    margin-left: 8px;
    width: 1715px;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #aa0404;
  color: white;
}


        #mainContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        #dataTableContainer {
            margin-right: 20px;
            margin-top: 57px;
        }

        #billContainer {
            width: 700px;
            overflow-y: auto;
            border: 2px solid #000000;
            padding: 10px;
            box-sizing: border-box;
        }

    
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #000000;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        #addRowBtn {
            margin-top: 10px;
            padding: 8px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #printBtn {
            margin-top: 10px;
            padding: 8px;
            background-color: #008CBA;
            color: white;
            border: none;
            cursor: pointer;
        }
        #billTable {
            width: 100%;
            margin-top: 12px;
        }
        
        #companyname{
            width: 322px;
            padding: 0px;
        }

        .info{
            margin-top: -14px;
        }

        #site{
            font-size: small;
            font-weight: bold;
        }

        #site2{
            border: none;
        }


        #challanNo{
            margin-left: 190px;
            font-size: small;
            font-weight: bold;
        }

        #challanNo2{
            border: none;
            font-weight: bold;
        }

        #address{
            font-size: small;
            font-weight: bold;
        }

        #address2{
            border: none;
            width: 590px;
        }

        #date{
            margin-left: 200px;
            font-size: small;
            font-weight: bold; 
        }

        #date2{
            border: none;
        }

        #contactNo{
            font-size: small;
            font-weight: bold; 
        }

        #contactNo2{
            border: none;
        }

        #poNo{
            margin-left: 176px;
            font-size: small;
            font-weight: bold; 
        }

        #poNo2{
           border: none;
        }

        #gstNo{
            font-size: small;
            font-weight: bold; 
            margin-left: 18px;
        }

        #gstNo2{
            border: none;
            font-weight: bold;
        }

        #poDate{
            margin-left: 170px;
            font-size: small;
            font-weight: bold; 
        }

        #poDate2{
            border: none;
        }

        #stateName{
            font-size: small;
            font-weight: bold;
            margin-left: 12px;
        }

        #stateName2{
          border: none;
        }

        #workNo{
            margin-left: 152px;
            font-size: small;
            font-weight: bold;  
        }

        #workNo2{
          border: none;
        }

        #transport{
            font-size: small;
            font-weight: bold;
            margin-left: 0px;
        }

        #transport2{
            border: none;
        }

        #vehicleNo{
            margin-left: 162px;
            font-size: small;
            font-weight: bold;  
        }

        #vehicleNo2{
          border: none;
        }

        #address34{
            font-size: small;
            font-weight: bold;
        }

        #address23{
           border: none; 
        }

        input{
            padding: 0px;
           
        }

        .info{
            border: 1px solid black;
        }


        /* Print media query */
        @media print {
            body {
                margin: 0;
                padding: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            #mainContainer {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 20px;
            }
            #dataTableContainer {
                margin-right: 20px;
            }
            #billContainer {
                width: 700px;
                border: 1px solid #000000;
                padding: 10px;
                box-sizing: border-box;
            }
            table {
                border-collapse: collapse;
                width: 100%;
            }
            th, td {
                border: 1px solid #000000;
                padding: 0px;
                text-align: center;
                font-size: small;
            }
            th {
                background-color: #f2f2f2;
            }
            #addRowBtn, #printBtn {
                display: none; /* Hide buttons in print view */
            }

            #dataTableContainer{
             display: none;
            }

            .topnav{
                display: none;
            }

            .editButton{
                display: none;
            }
        }

    
    </style>
</head>
<body>
 
    <div class="topnav">
		<a class="active" href="home.html">Home</a>
		<a href="newcal.html">Daily Estimate Bill</a>
		<a href="gst.html">Gst Bill</a>
		<a href="excel.html">Daily Estimate Bill Records</a>
		<a href="inventory.html">Inventory</a>
		<a href="self.html">Self Daily Bill Records</a>
		<a href="search.html">Search the product</a>
    <a href="barcode.html">Generate Barcode</a>
	  </div>









    <div id="mainContainer">
        <div id="dataTableContainer">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>Material</th>
                        <th>Sr. No</th>
                        <th>Description</th>
                        <th>Length</th>
                        <th>Breadth</th>
                        <th>Quantity</th>
                        <!-- <th>Square Feet</th> -->
                       
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <select name="material[]" onchange="calculateSquareFeet(this)">
                                <option value="Granite">Granite</option>
                                <option value="Kadappa">Kadappa</option>
                                <option value="uncut granite">Uncut Granite</option>
                                <option value="Marble">Sanitary</option>
                                <option value="Tiles">Tiles</option>
                                <option value="Molding">Molding</option>

                            </select>
                        </td>
                        <td><input type="text" id="srNo" name="srNo[]" value="1"></td>
                        <td><input type="text" id="description" name="description[]"></td>
                        <td><input type="number" id="length" name="length[]" oninput="calculateSquareFeet(this)"></td>
                        <td><input type="number" id="breadth" name="breadth[]" oninput="calculateSquareFeet(this)"></td>
                        <td><input type="number" id="quantity" name="quantity[]" oninput="calculateSquareFeet(this)"></td>
                        <!-- <td><input type="text" name="quantity[]" readonly></td> -->
                        
                    </tr>
                </tbody>
            </table>
            <button id="addRowBtn" onclick="addRow()">Add Row</button>
            <button id="printBtn" onclick="printBill()">Print</button>
        </div>
    </div>
      </div>

      
    <div id="billContainer">
        <h3 style="border: 1px solid black;">DELIVERY CHALLAN ON APPROVAL</h3>
        <h5><b><input type="text" id="companyname" style=" font-weight: bold;"></b></h5>
       
         <!-- Additional Information Section -->
         <div class="info">
            <label for="site" id="site">Site:</label>
            <input type="text" id="site2" name="site">

            <label for="challanNo" id="challanNo">Challan No:</label>
            <input type="text" id="challanNo2" name="challanNo">

             <label for="address" id="address34">Pincode:</label>
             <input type="text" id="address23"> 

           <label for="date" id="date">Date:</label>
           <input type="text" id="date2">

           <label for="contactNo" id="contactNo">Contact No:</label>
           <input type="text" id="contactNo2" name="contactNo">

           <label for="poNo" id="poNo">Po No:</label>
           <input type="text" id="poNo2" name="poNo">

           <label for="gstNo" id="gstNo">GST NO:</label>
           <input type="text" id="gstNo2" name="gstNo">

           <label for="poDate" id="poDate">Po Date:</label>
            <input type="text" id="poDate2" name="poDate">

            <label for="stateName" id="stateName">State Name:</label>
            <input type="text" id="stateName2" name="stateName">

            <label for="workNo" id="workNo">Work No:</label>
            <input type="text" id="workNo2" name="workNo">

            <label for="transport" id="transport">Transport:</label>
            <input type="text" id="transport2" name="transport">

            <label for="vehicleNo" id="vehicleNo">Vehicle No:</label>
            <input type="text" id="vehicleNo2" name="vehicleNo">

            <label for="address" id="address">Address:</label>
           <input type="text" id="address2">
         </div>
            
        
         <table id="billTable">
            <thead>
                <tr>
                    <th>Sr. No</th>
                    <th>Description</th>
                    <th>Length</th>
                    <th>Breadth</th>
                    <th>Quantity</th>
                    <!-- <th>Square Feet</th> -->
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
                <tr>
                    <td colspan="4">Total:</td>
                    <td id="totalQuantity">0</td>
                    <!-- <td id="totalSquareFeet">0</td> -->
                </tr>
            </tfoot>
            
        </table>
    </div>
   
    

<script>
  
  var selectedRowIndex = -1; // To store the index of the row being edited

function addRow() {
    var table = document.getElementById("dataTable");
    var billTable = document.getElementById("billTable").getElementsByTagName('tbody')[0];
    var newRow = billTable.insertRow(billTable.rows.length);
    var cells = [];
    for (var i = 1; i < table.rows[1].cells.length; i++) {
        cells[i - 1] = newRow.insertCell(i - 1);
        cells[i - 1].innerHTML = table.rows[1].cells[i].getElementsByTagName("input")[0].value;
    }
    // Add an edit button
    var editButton = document.createElement("button");
    editButton.textContent = "Edit";
    editButton.className = "editButton"; // Apply class
    editButton.onclick = function() {
        editRow(newRow);
    };
    cells.push(newRow.insertCell(cells.length));
    cells[cells.length - 1].appendChild(editButton);

    // Update total quantity and total square feet
    updateTotals();
}

function editRow(row) {
    // Populate the inputs with the current row values
    for (var i = 0; i < row.cells.length - 1; i++) {
        var input = document.createElement("input");
        input.type = "text";
        input.value = row.cells[i].innerHTML.trim();
        row.cells[i].innerHTML = "";
        row.cells[i].appendChild(input);
    }

    // Replace Edit button with Save button
    var saveButton = document.createElement("button");
    saveButton.textContent = "Save";
    saveButton.onclick = function() {
        saveRow(row);
    };
    row.cells[row.cells.length - 1].innerHTML = "";
    row.cells[row.cells.length - 1].appendChild(saveButton);
}

function saveRow(row) {
    // Update the row with input values
    for (var i = 0; i < row.cells.length - 1; i++) {
        row.cells[i].innerHTML = row.cells[i].querySelector("input").value;
    }

    // Replace Save button with Edit button
    var editButton = document.createElement("button");
    editButton.textContent = "Edit";
    editButton.onclick = function() {
        editRow(row);
    };
    row.cells[row.cells.length - 1].innerHTML = "";
    row.cells[row.cells.length - 1].appendChild(editButton);

    // Update total quantity and total square feet
    updateTotals();
}

    

function calculateSquareFeet(input) {
    var row = input.parentNode.parentNode;
    var material = row.cells[0].getElementsByTagName("select")[0].value; // Get the selected material
    var quantity = parseFloat(row.cells[5].getElementsByTagName("input")[0].value) || 0;
    
    // Update description based on the selected material
    switch(material) {
        case "Granite":
            row.cells[2].getElementsByTagName("input")[0].value = "Granite";
            break;
        case "Kadappa":
            row.cells[2].getElementsByTagName("input")[0].value = "Kadappa";
            break;
        case "uncut granite":
            row.cells[2].getElementsByTagName("input")[0].value = "Uncut Granite";
            break;
        case "Marble":
            row.cells[2].getElementsByTagName("input")[0].value = "Sanitary";
            break;
        case "Tiles":
            row.cells[2].getElementsByTagName("input")[0].value = "Tiles";
            break;
            case "Molding":
            row.cells[2].getElementsByTagName("input")[0].value = "Molding";
            break;
        default:
    
    }

    row.cells[6].getElementsByTagName("input")[0].value = quantity.toFixed(2);

    // Update total quantity only
    updateTotals();
}




       





        function updateTotals() {
    var billTable = document.getElementById("billTable").getElementsByTagName("tbody")[0];
    var totalQuantity = 0;

    for (var i = 0; i < billTable.rows.length; i++) {
        var quantity = parseFloat(billTable.rows[i].cells[4].innerHTML) || 0;

        totalQuantity += quantity;
    }

    document.getElementById("totalQuantity").innerHTML = totalQuantity.toFixed(2);
}


    function printBill() {
        window.print();
    }


</script>

</body>
</html>